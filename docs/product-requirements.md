# プロダクト要求定義書 (Product Requirements Document)

## プロダクト概要

### 名称
**DX Selecta** - バックオフィスSaaS選定から稟議までを一気通貫で支援するツール

### プロダクトコンセプト
- **中立性**: 紹介料・アフィリエイトなしで客観的な比較を提供
- **稟議突破**: 検索・比較だけでなく、差し戻しに強い稟議書まで自動生成
- **根拠重視**: すべての情報に出典URL・最終確認日を付与し説明責任を担保

### プロダクトビジョン
バックオフィスDXツールの選定は「調査→比較→稟議」のサイクルが長期化し、担当者の大きな負担となっている。本プロダクトは、事前収集・正規化されたDBから高速に候補を推薦し、比較表と稟議1枚を自動生成することで、**選定から社内意思決定までの時間を1/3以下に短縮**する。担当者が「調査員」ではなく「意思決定者」として本来の業務に集中できる世界を目指す。

### 目的
- バックオフィスSaaS選定の調査・比較工数を大幅に削減する
- 稟議の差し戻しを減らし、社内意思決定を加速する
- 根拠付きの情報で、導入後のミスマッチを防ぐ

---

## ターゲットユーザー

### プライマリーペルソナ: 田中さん（35歳、情シス担当 兼 総務）

**属性**
- 中小〜中堅企業（50〜300名規模）の情シス担当
- バックオフィス業務全般（IT/総務/経理サポート）を兼務
- 年に2〜3件のSaaS導入・リプレースを担当

**現在の課題**
- 比較軸が定まらず、検討が1ヶ月以上長期化する
- Must条件（SSO/監査ログ/契約条件）を見落として後から発覚
- 稟議で「根拠が弱い」「費用の妥当性が不明」と差し戻される
- 条件変更のたびに調査・比較・資料作成がやり直し

**期待する解決策**
- 要件を整理したら、候補が自動で絞り込まれる
- 比較表と稟議書が一発で生成される
- 差し戻されても、条件を変えて再生成できる

**1日の典型的なワークフロー**
1. 朝：経理部門から「経費精算ツールを検討したい」と依頼
2. 午前：Web検索で候補を10件ほどリストアップ
3. 午後：各サービスのサイトを巡回し、価格・機能を比較表にまとめる
4. 夕方：上司に報告 → 「SSO対応は？監査ログは？」と追加質問
5. 翌日以降：追加調査 → 稟議書作成 → 差し戻し → 修正...のループ

---

## 成功指標(KPI)

### プライマリーKPI

| 指標 | 目標値 | 期限 | 測定方法 |
|------|--------|------|----------|
| 日次アクティブユーザー (DAU) | 100人 | 3ヶ月後 | Supabase Auth ログイン数 |
| 診断→稟議生成到達率 | 40%以上 | 3ヶ月後 | イベントトラッキング |
| 稟議再生成回数/ユーザー | 2回以上/月 | 3ヶ月後 | proposal_outputs テーブル集計 |

### セカンダリーKPI

| 指標 | 目標値 | 期限 | 測定方法 |
|------|--------|------|----------|
| Google Docs出力率 | 30%以上 | 3ヶ月後 | generate/proposal API呼び出し |
| NPS (推奨度) | +20以上 | 6ヶ月後 | アプリ内サーベイ |
| 有料転換率 (Free→Business) | 5%以上 | 6ヶ月後 | Stripe Subscription |

---

## 機能要件

### コア機能(MVP)

#### 1. 診断（要件入力）

**ユーザーストーリー**:
情シス担当として、検討中のSaaS要件を整理するために、対話形式で会社属性・課題・制約を入力できる機能が欲しい

**受け入れ条件**:
- [ ] 会社属性（業種、規模、体制、地域）を選択/入力できる
- [ ] 対象カテゴリ（会計/経費/勤怠/人事労務/ワークフロー/電子契約/請求受領/購買）を選択できる
- [ ] 課題を複数選択 + 自由記述で入力できる
- [ ] Must条件（予算、導入期限、言語、SSO、監査ログ、データ保管）を設定できる
- [ ] 重み（優先度）を運用負荷/導入難易度/連携/セキュリティ/価格で調整できる
- [ ] 入力完了から推薦結果表示まで3秒以内

**優先度**: P0（必須）

---

#### 2. 検索・推薦（ハイブリッド検索）

**ユーザーストーリー**:
情シス担当として、要件に合った候補を素早く見つけるために、Must条件でフィルタされた上位候補と推薦理由を見たい

**受け入れ条件**:
- [ ] Mustフィルタ（facts/price/integrations）で候補を絞り込める
- [ ] BM25 + ベクトル検索のハイブリッドで候補を抽出できる
- [ ] 重み付きスコアでランキングされた上位3〜5件が表示される
- [ ] 各候補にExplain（根拠URL/抜粋/最終確認日/懸念点/質問リスト）が付与される
- [ ] "要確認"項目がある場合は明示される
- [ ] 検索結果表示まで2秒以内（100件DBの場合）

**優先度**: P0（必須）

---

#### 3. 比較UI

**ユーザーストーリー**:
情シス担当として、候補を客観的に比較するために、評価軸×候補のマトリクス形式で情報を見たい

**受け入れ条件**:
- [ ] 評価軸（価格/SSO/監査ログ/連携/導入難易度/運用負荷）× 候補（上位3〜5件）のマトリクス表示
- [ ] 各セルに根拠URLが付与されている
- [ ] "要確認"項目は視覚的に区別される（アイコン/背景色）
- [ ] 候補の追加/削除ができる
- [ ] 比較結果をCSVエクスポートできる

**優先度**: P0（必須）

---

#### 4. 稟議1枚生成

**ユーザーストーリー**:
情シス担当として、上司・経営層に提案するために、比較結果から稟議書を自動生成したい

**受け入れ条件**:
- [ ] Markdown形式で稟議書を生成・表示できる
- [ ] Google Docs形式で出力できる（OAuth認証必要）
- [ ] テンプレート項目（背景/目的/比較/推奨理由/懸念/費用/導入ステップ/セキュリティ/質問リスト/承認依頼）がすべて埋まる
- [ ] 生成履歴が保存される（過去の稟議を参照可能）
- [ ] 条件変更後の再生成ができる
- [ ] 生成完了まで5秒以内

**優先度**: P0（必須）

---

#### 5. 認証・テナント管理

**ユーザーストーリー**:
ユーザーとして、安全にサービスを利用するために、メール/Google/Microsoft認証でログインしたい

**受け入れ条件**:
- [ ] Supabase Authによるメール/Google/Microsoft認証
- [ ] テナント設定（search_scope: JP_ONLY/JP_GLOBAL, ingestion_mode: CURATED/BROAD）を保存できる
- [ ] ユーザー招待・権限管理ができる（Businessプラン）

**優先度**: P0（必須）

---

### 将来的な機能(Post-MVP)

#### 6. RFP・問い合わせテンプレ生成

稟議承認後のベンダー問い合わせ用テンプレートを自動生成

**優先度**: P2（できれば）

#### 7. PoC計画テンプレ

トライアル/PoC実施時の評価軸・撤退条件テンプレートを生成

**優先度**: P2（できれば）

#### 8. 海外SaaS対応（JP_GLOBAL）

検索スコープを海外SaaSまで拡張

**優先度**: P2（できれば）

---

## 非機能要件

### パフォーマンス
- コマンド/API実行時間: 診断入力→推薦表示 3秒以内
- 検索結果表示: 100件DBで2秒以内
- 稟議生成: 5秒以内
- 同時接続ユーザー: 100人まで応答劣化なし

### ユーザビリティ
- 新規ユーザーが10分以内に診断→稟議生成まで完了できる
- モバイル対応（レスポンシブデザイン）
- 主要操作は3クリック以内で完了

### 信頼性
- サービス稼働率: 99.5%以上（月間ダウンタイム3.6時間以内）
- データ損失ゼロ（Supabase自動バックアップ）
- 障害時の復旧目標: RPO 1時間、RTO 4時間

### セキュリティ
- 通信の暗号化（TLS 1.3）
- データ保管時の暗号化（AES-256）
- 認証トークンの有効期限: 24時間
- 監査ログ: 全API呼び出しを90日間保持

### スケーラビリティ
- DB製品数: 初期100件 → 300件 → 1000件への段階的拡張
- ユーザー数: 1000人までは現アーキテクチャで対応
- 収集モード: CURATED → BROAD への切替可能な設計

---

## スコープ外

明示的にスコープ外とする項目:

- **紹介料・アフィリエイトによる収益化**: 中立性を最優先
- **リアルタイムクローリング**: 事前収集DBからの検索のみ
- **ベンダーへの問い合わせ代行**: テンプレート提供まで
- **契約交渉・価格交渉支援**: 情報提供のみ
- **導入後の運用支援**: 選定・稟議フェーズに特化
- **自社開発ツールの評価**: 市販SaaSのみを対象

---

## 課金プラン（案）

| プラン | 価格 | 機能 |
|--------|------|------|
| Free | ¥0 | 診断、上位3件表示、簡易比較 |
| Business | ¥9,800/月 | 稟議生成、Docs出力、履歴、共有、生成回数無制限 |
| Enterprise | 要問合せ | SSO、監査ログ、カスタムテンプレート |

---

## 技術スタック（参考）

- **Frontend**: Next.js (App Router) + TypeScript
- **Backend**: Supabase (Auth, Database, Storage, Edge Functions)
- **検索**: PostgreSQL全文検索 (BM25) + pgvector
- **外部連携**: Google Docs API
- **インフラ**: Vercel + Supabase Cloud

---

*最終更新: 2026-01-11*
*ステータス: ドラフト - ユーザー承認待ち*
