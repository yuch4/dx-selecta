---
description: 直近の実装コードを品質・セキュリティ・パターン準拠の観点でレビューする
---

# Review Changes (Recent Implementation Review)

あなたは経験豊富なシニアエンジニアとして、直近の実装コードをレビューします。
**Read-onlyモード**で実行し、コードの修正は行いません。問題点と改善提案のみを報告します。

## 入力
- レビュー対象: ${input:target:例) 直近のcommit / 特定ファイル / 特定機能}
- フォーカス領域（任意）: ${input:focus:例) セキュリティ / パフォーマンス / 可読性}

## 参照
- 開発規約: `docs/development-guidelines.md`
- アーキテクチャ: `docs/architecture.md`
- 機能設計: `docs/functional-design.md`
- Copilot指示: `.github/copilot-instructions.md`

---

## レビュー手順

### 1) 対象の特定
以下の方法で直近の変更を特定してください：

**Git履歴から（推奨）**
```bash
# 直近のコミット差分
git diff HEAD~1

# 直近N件のコミット一覧
git log --oneline -10

# 特定コミットの差分
git show <commit-hash>

# ステージング中の変更
git diff --cached
```

**steering履歴から**
- `.steering/` ディレクトリ内の最新フォルダを確認
- `tasklist.md` の完了タスクから変更ファイルを特定

### 2) コードレビュー観点

#### 🔒 セキュリティ
- [ ] 認証・認可の適切な実装
- [ ] 入力値のバリデーション
- [ ] SQLインジェクション/XSS対策
- [ ] シークレット・機密情報の露出
- [ ] 適切なエラーハンドリング（情報漏洩防止）

#### 🏗️ アーキテクチャ・パターン準拠
- [ ] 既存の命名規則に従っている
- [ ] ファイル配置が規約通り
- [ ] 責務分離（コンポーネント/ロジック/データ）
- [ ] 既存パターンの踏襲（新規パターン導入の妥当性）

#### 📝 コード品質
- [ ] 型安全性（TypeScript: any回避、適切な型定義）
- [ ] エラーハンドリングの網羅性
- [ ] 重複コードの有無
- [ ] 関数・変数の命名の明確さ
- [ ] 適切なコメント（Why重視、Whatは最小限）

#### ⚡ パフォーマンス
- [ ] 不要な再レンダリング（React）
- [ ] N+1クエリの可能性
- [ ] 大量データ処理時の考慮
- [ ] 適切なキャッシュ戦略

#### 🧪 テスタビリティ
- [ ] テストが追加/更新されている
- [ ] テスト可能な設計（依存性注入等）
- [ ] エッジケースの考慮

#### 📚 ドキュメント
- [ ] 必要なドキュメント更新
- [ ] 複雑なロジックへの説明

### 3) 出力フォーマット

レビュー結果を以下の形式で報告してください：

---

## 📋 レビューサマリー

**対象**: [レビュー対象の概要]
**変更ファイル数**: X files
**レビュー日**: YYYY-MM-DD

### 🎯 総合評価

| 観点 | 評価 | コメント |
|------|------|----------|
| セキュリティ | ✅/⚠️/❌ | 一言コメント |
| パターン準拠 | ✅/⚠️/❌ | 一言コメント |
| コード品質 | ✅/⚠️/❌ | 一言コメント |
| パフォーマンス | ✅/⚠️/❌ | 一言コメント |
| テスタビリティ | ✅/⚠️/❌ | 一言コメント |

### 🚨 Critical（必須対応）

> 対応必須の重大な問題

1. **[ファイル名:行番号]** 問題の説明
   - 理由: なぜ問題か
   - 提案: 修正案

### ⚠️ Warning（推奨対応）

> 対応を推奨する問題

1. **[ファイル名:行番号]** 問題の説明
   - 提案: 改善案

### 💡 Suggestion（任意改善）

> より良くするための提案

1. **[ファイル名:行番号]** 提案内容

### ✅ Good Points

> 良かった点・学びになる実装

1. [ファイル名] 良かった点の説明

---

## 補足

### 評価基準
- ✅ OK: 問題なし
- ⚠️ Warning: 軽微な問題あり（改善推奨）
- ❌ Critical: 重大な問題あり（マージ前に修正必須）

### レビューの限界
- 静的解析のみ（実行時の動作確認は別途必要）
- ビジネスロジックの正確性は設計書との整合性のみ確認