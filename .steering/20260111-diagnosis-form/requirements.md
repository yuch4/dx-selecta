# 要求内容

## 概要

診断機能（要件入力フォーム）を実装する。ユーザーが会社属性・課題・制約を入力し、SaaS推薦のための要件を整理できるようにする。

## 背景

PRDの「1. 診断（要件入力）」機能を実装する。情シス担当が検討中のSaaS要件を整理するため、対話形式で会社属性・課題・制約を入力できる機能が必要。

## 実装対象の機能

### 1. DiagnosisSession / DiagnosisInput テーブル
- 診断セッションとその入力データを保存するテーブル
- RLSで自分のテナントのデータのみアクセス可能

### 2. 診断フォームUI
- ステップ形式のフォーム（会社属性 → カテゴリ選択 → 課題入力 → Must条件 → 重み付け）
- 各ステップごとにバリデーション
- 入力完了後は検索ページへ遷移

### 3. Server Actions
- 診断セッション作成
- 診断入力保存
- 診断完了処理

## 受け入れ条件

### DB
- [ ] diagnosis_sessions テーブルが作成されている
- [ ] diagnosis_inputs テーブルが作成されている
- [ ] RLSポリシーが設定されている

### UI
- [ ] 会社属性（業種、規模、地域）を選択/入力できる
- [ ] 対象カテゴリ（会計/経費/勤怠/人事労務/ワークフロー/電子契約/請求受領/購買）を選択できる
- [ ] 課題を複数選択 + 自由記述で入力できる
- [ ] Must条件（予算、導入期限、言語、SSO、監査ログ、データ保管）を設定できる
- [ ] 重み付けを調整できる
- [ ] 入力完了から次のステップへ遷移できる

## スコープ外

- ハイブリッド検索の実装（次フェーズ）
- 稟議生成（次フェーズ）

## 参照ドキュメント

- `docs/product-requirements.md` - PRD「1. 診断（要件入力）」
- `docs/functional-design.md` - DiagnosisSession, DiagnosisInput の定義
